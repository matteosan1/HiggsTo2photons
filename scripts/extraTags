#!/bin/bash
get_git()
{
    tag=$1 && shift
    src=$1 && shift
    dst=$1 && shift
    wd=$(pwd)
    
    echo
    echo "Checking out $tag $src into $dst"
    
    if [[ ! -d $dst ]]; then
        git clone $src $dst
    fi
    cd $dst
    git fetch origin
    git checkout $tag
    
    cd $wd
    echo "done"
    echo
    
    packs="$packs $dst"
}

## all commands you should give are reported 
## this should help at least the firsts times to set up a working environment 
## to keep compatibility with the previous version they are commented out

#define the scram environment
#-# export SCRAM_ARCH=slc5_amd64_gcc462
#set up a CMSSW work directory
#-# cmsrel CMSSW_5_3_10_patch1
#-# cd CMSSW_5_3_10_patch1/src
#-# cmsenv

#make the work directory a git repository
#-# git init .
# get the cmssw - all or single branch in future 
#-# git fetch cmssw-main

#add the UserCode code
#cd $CMSSW_BASE/src ; mkdir  CommonTools ; cd CommonTools ; git clone git@github.com:h2gglobe/CommonTools_RecoUtils RecoUtils -b V00-00-09
#cd $CMSSW_BASE/src ; mkdir CMGTools ;cd CMGTools/ ; git clone git@github.com:h2gglobe/External ; cd External ;git checkout V00-02-05 
#cd $CMSSW_BASE/src ; mkdir EGamma ; cd EGamma; git clone git@github.com:h2gglobe/EGammaAnalysisTools; cd EGammaAnalysisTools; git checkout master;
#cd $CMSSW_BASE/src ; mkdir EgammaAnalysis ; cd EgammaAnalysis; git clone git@github.com:h2gglobe/ElectronTools; cd ElectronTools; git checkout master;
get_git V00-02-05 https://github.com/h2gglobe/External.git CMGTools/External

#get_git V00-00-09 https://github.com/h2gglobe/CommonTools_RecoUtils.git CommonTools/RecoUtils
#get_git master https://github.com/h2gglobe/EGammaAnalysisTools.git EGamma/EGammaAnalysisTools
#get_git master https://github.com/h2gglobe/ElectronTools.git EgammaAnalysis/ElectronTools


#export CVSROOT=:ext:sani@lxplus.cern.ch:/afs/cern.ch/user/c/cvscmssw/public/CMSSW
#cvs co EGamma/EGammaAnalysisTools
#cvs co EgammaAnalysis/ElectronTools
cd $CMSSW_BASE/src; git clone git@github.com:matteosan1/EgammaAnalysis; git checkout master
cd $CMSSW_BASE/src; git clone git@github.com:matteosan1/RecoEgamma; git checkout topic_for_globe

#download extra informations
cd $CMSSW_BASE/src ; cd EgammaAnalysis/ElectronTools/data/; wget -i ../../../HiggsAnalysis/HiggsTo2photons/scripts/download.url

#go back to the BASE directory
cd $CMSSW_BASE/src

